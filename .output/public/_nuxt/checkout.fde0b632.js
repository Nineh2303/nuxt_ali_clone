import{D as C,b as o,c as a,e as t,H as s,t as d,B as u,K as F,q as S,Q as B,r as h,U as P,S as y,L as D,o as E,V as I,M as f,w as v,g as _,W as M,F as N,N as j,n as T,O as z,C as L}from"./entry.821f6ffe.js";import{u as U}from"./fetch.2f5bd2eb.js";import V from"./MainLayout.a081fd2a.js";import"./index.74d00255.js";const O={class:"flex justify-start my-2"},K=["src"],R={class:"overflow-hidden pl-2"},W={class:"flex items-center"},q=t("span",{class:"bg-[#FD374F] text-white text-[9px] font-semibold px-1.5 rounded-sm min-w-[80px]"},"Welcome Deal",-1),H={class:"truncate pl-2"},Q={class:"text-lg font-semibold mt-2"},Z={class:"font-bold"},G={__name:"CheckoutItem",props:{product:{}},setup(x){const n=x,{product:c}=C(n);return(l,i)=>(o(),a("div",O,[t("img",{class:"rounded-md w-[90px] max-h-[210px]",src:s(c).productImg,alt:""},null,8,K),t("div",R,[t("div",W,[q,t("div",H,d(s(c).productName),1)]),t("div",Q,[u(" $"),t("span",Z,d(s(c).productPrice/100),1)])])]))}},J=G,X={id:"CheckoutPage",class:"mt-4 max-w-[1200px] mx-auto px-2"},Y={class:"md:flex gap-4 justify-between mx-auto w-full"},tt={class:"md:w-[65%]"},st={class:"bg-white rounded-lg p-4"},et=t("div",{class:"text-xl font-semibold mb-2"},"Shipping Address",-1),ot={key:0},dt={class:"pt-2 border-t"},nt=t("div",{class:"underline pb-1"},"Delivery Address",-1),it={class:"text-xs"},ct={class:"flex items-center gap-2"},at=t("div",null,"Contact name:",-1),lt={class:"font-bold"},rt={class:"flex items-center gap-2"},_t=t("div",null,"Address:",-1),ut={class:"font-bold"},mt={class:"flex items-center gap-2"},pt=t("div",null,"Zip code:",-1),ht={class:"font-bold"},ft={class:"flex items-center gap-2"},vt=t("div",null,"City:",-1),xt={class:"font-bold"},bt={class:"flex items-center gap-2"},gt=t("div",null,"Country:",-1),yt={class:"font-bold"},wt={id:"Items",class:"bg-white rounded-lg p-4 mt-4"},kt=t("div",{class:"md:hidden block my-4"},null,-1),$t={class:"md:w-[35%]"},At={id:"PlaceOrder",class:"bg-white rounded-lg p-4"},Ct=t("div",{class:"text-2xl font-extrabold mb-2"},"Summary",-1),Ft=t("div",{class:"flex items-center justify-between my-4"},[t("div",null,"Total shipping"),t("div",null,"Free")],-1),St=t("div",{class:"border-t"},null,-1),Bt={class:"flex items-center justify-between my-4"},Pt=t("div",{class:"font-semibold"},"Total",-1),Dt={class:"text-2xl font-semibold"},Et={class:"font-extrabold"},It=t("div",{class:"border border-gray-500 p-2 rounded-sm",id:"card-element"},null,-1),Mt=t("p",{id:"cart-error",role:"alert",class:"text-red-700 text-center font-semibold"},null,-1),Nt=["disabled"],jt={key:1},Tt=t("div",{class:"bg-white rounded-lg p-4 mt-4"},[t("div",{class:"text-lg font-semibold mb-2 mt-2"},"AliExpress"),t("p",{class:"my-2"},"AliExpress keeps your information and payment safe")],-1),Ot={__name:"checkout",setup(x){const n=F(),c=S(),l=B();let i=h(0),e=h(null),r=h(!1);P(async()=>{if(n.cart.length<1)return y("/shoppingcart");i.value=0,l.value&&(e.value=await U(`/api/prisma/get-address-by-user/${l.value.id}`,"$DrBjMi2MAK"),setTimeout(()=>n.isLoading=!1,200))}),D(()=>{if(c.fullPath=="/checkout"&&!l.value)return y("/auth")}),E(()=>{r.value=!0,n.checkout.forEach(m=>{i.value+=m.productPrice})}),I(()=>i.value,()=>{i.value>0&&w()});const w=async()=>{},k=async()=>{};return(m,b)=>{const p=z,g=L,$=J;return o(),f(V,null,{default:v(()=>[t("div",X,[t("div",Y,[t("div",tt,[t("div",st,[et,s(e)&&s(e).data?(o(),a("div",ot,[_(g,{to:"/address",class:"flex items-center pb-2 text-blue-500 hover:text-red-400"},{default:v(()=>[_(p,{name:"mdi:plus",size:"18",class:"mr-2"}),u(" Update Address ")]),_:1}),t("div",dt,[nt,t("ul",it,[t("li",ct,[at,t("div",lt,d(s(e).data.name),1)]),t("li",rt,[_t,t("div",ut,d(s(e).data.address),1)]),t("li",mt,[pt,t("div",ht,d(s(e).data.zipcode),1)]),t("li",ft,[vt,t("div",xt,d(s(e).data.city),1)]),t("li",bt,[gt,t("div",yt,d(s(e).data.country),1)])])])])):(o(),f(g,{key:1,to:"/address",class:"flex items-center text-blue-500 hover:text-red-400"},{default:v(()=>[_(p,{name:"mdi:plus",size:"18",class:"mr-2"}),u(" Add new Address ")]),_:1}))]),t("div",wt,[(o(!0),a(N,null,M(m.products,A=>(o(),a("div",null,[_($,{product:s(n).checkout},null,8,["product"])]))),256))])]),kt,t("div",$t,[t("div",At,[Ct,Ft,St,t("div",Bt,[Pt,t("div",Dt,[u(" $ "),t("span",Et,d(s(i)/100),1)])]),t("form",{onSubmit:b[0]||(b[0]=j(A=>k(),["prevent"]))},[It,Mt,t("button",{disabled:s(r),type:"submit",class:T(["mt-4 bg-gradient-to-r from-[#FE630C] to-[#FF3200] w-full text-white text-[21px] font-semibold p-1.5 rounded-full",s(r)?"opacity-70":"opacity-100"])},[s(r)?(o(),f(p,{key:0,name:"eos-icons:loading"})):(o(),a("div",jt,"Place Order"))],10,Nt)],32)]),Tt])])])]),_:1})}}};export{Ot as default};
